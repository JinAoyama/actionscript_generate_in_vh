# Automatic Action Scripts Generation Based on Home Environment Knowledge and LLM in VirtualHome
## Set Up (VirtualHome)
1. [VirtualHome](https://github.com/xavierpuigf/virtualhome) Setup
2. Refer to VirtualHome's Github to confirm that it works properly.

## Set Up (VirtualHome AIST)
1. [VirtualHome_aist](https://github.com/aistairc/virtualhome_aist/) Setup
2. Refer to virtualhome_aist's Github to confirm that it works properly.
3. Note that the simulator is different from the original VirtualHome. The simulator can be downloaded [here](https://github.com/aistairc/virtualhome_unity_aist/releases/tag/Door_Modified_Build_2023_0404/).
※ Note that the original VirtualHome and VirtualHome AIST have different python execution environments.

## How to execute the our system (VirtualHome Original)
1. Download the original_vh_program folder and put it under (virtualhome/).
2. Run VirtualHome.exe. (virtualhome/simulation/unity_simulator/VirtualHome.exe)
3. Open the jupyter file(original_vh_program.ipynb) and run it from the top. Put any action description in the last cell and run it to generate the action script.
※ Note that the [OpenAI](https://openai.com/) API is required for execution.

## How to execute the our system (VirtualHome AIST)
1. Download the aist_vh_program folder and put it under (virtualhome_aist/).
2. Run VirtualHome.exe. (virtualhome_aist/simulation/unity_simulator/VirtualHome.exe)
3. Open the jupyter file(aist_vh_program.ipynb) and run it from the top. Put any action description in the last cell and run it to generate the action script.
※ Note that the [OpenAI](https://openai.com/) API is required for execution.

## Reproduction of evaluation experiments
1. Download the evaluation_program_and_data folder.
2. The folder contains the program for each experiment, a folder with scripts generated using the VH dataset (generated_vh_data) (divided into a folder with scripts generated by class name and a folder with scripts generated by object name), a folder with the correct data of VH dataset (correct_vh_data), a folder with scripts generated using KGRC4SI dataset (generated_kgrc_data), and a folder with correct data of KGRC4SI (correct_kgrc_data).

### LCS score
1. Open the jupyter file(lsc.ipynb).
2. When executing the evaluation program, it is necessary to specify the paths of the generated data (data to be evaluated) and the correct answer data. Since a corresponding scene number is assigned to the end of each file name, the scene number of the generated data and the scene number of the correct data must match.

### Corecteness
1. Open the jupyter file(correctness.ipynb). ※To evaluate excluding Abnormal data, open correctness_without_abnormal.
2. When executing the evaluation program, it is necessary to specify the paths of the generated data (data to be evaluated) and the correct answer data. Since a corresponding scene number is assigned to the end of each file name, the scene number of the generated data and the scene number of the correct data must match.

### Simlator(execution rate)
1. Only this evaluation requires the VirtualHome simulator.
2. Run VirtualHome.exe and Open the jupyter file(sim.ipynb).
3. As with Lcs score and Corectness, specify the path of the data you wish to evaluate and execute. Note that the data must correspond to the scene of the execution environment. Scene in the execution environment can be specified in the top cell of the program file(sim.ipynb).

### Supplement
The dataset used is in the folder ~.
